<html>
	<head>
		<title>Push notification server streaming on a MySQL db</title>
		<style>
			dd,dt {
				float:left;
				margin:0;
				padding:5px;
				clear:both;
				display:block;
				width:100%;

			}
			dt {
				background:#ddd;
			}
			time {
				color:gray;
			}
		</style>
	</head>
	<body>
        <time></time>
        <div id="container">Fetching notifications ...</div>
    <script src="socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script>

        // create a new websocket
        var socket = io.connect('http://localhost:8000');
        // on message received we print all the data inside the #container div
        socket.on('notification', function (data) {
        var usersList = "<dl>";
        console.log("Number of rows: "+data.users.length);
        $.each(data.users,function(index,user){
            usersList += "<dt> Comment id:" + user.comment_id + "</dt>\n" +
                         "<dd> Commentor user id:" + user.commentor_user_id + "\n" +
                         "<dd> Commentor first_name:" + user.commentor_first_name + "\n" +
                       	 "<dd> Commentor last_name:" + user.commentor_last_name + "\n" +
                       	 "<dd> Commentor last_name:" + user.commentor_last_name + "\n" 
                         "</dd>";
        });
        usersList += "</dl>";
        $('#container').html(usersList);
   
        $('time').html('Last Update:' + data.time);
      });
    </script>
    </body>
</html>